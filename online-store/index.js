(()=>{"use strict";(()=>{const e=["lenovo","hp","dell","msi"],t=[["Dell new","./assets/sss.webp",8,2022,"dell","red",16,!1],["Hp old","./assets/sss.webp",13,2018,"hp","black",15,!1],["Dell old","./assets/sss.webp",10,2019,"dell","white",14,!1],["Hp new","./assets/sss.webp",6,2021,"hp","grey",17,!1],["Lenovo mega","./assets/sss.webp",15,2020,"lenovo","red",16,!1]];class s{constructor(e,t,s,a,n,r,c,i){this.name=e,this.img=t,this.amount=s,this.year=a,this.manufacturer=n,this.color=r,this.size=c,this.hot=i;const o=localStorage.getItem(`card${this.name}`);this.isFavorit=!!o&&JSON.parse(o),this.cart=this.createCart(),this.element=this.createEl()}createEl(){const e=document.createElement("div");e.className="card";const t=document.createElement("h2");t.className="card__title",t.innerHTML=this.name,e.append(t);const s=document.createElement("div");s.className="card__img-container",s.innerHTML=` <img class="card__img" src="${this.img}" alt="${this.name}">`,e.append(s);const a=document.createElement("ul");a.className="card__props";const n=document.createElement("li");n.innerHTML=`Количество: ${this.amount}`,a.append(n);const r=document.createElement("li");r.innerHTML=`Год выхода: ${this.year}`,a.append(r);const c=document.createElement("li");c.innerHTML=`Производитель: ${this.manufacturer}`,a.append(c);const i=document.createElement("li");i.innerHTML=`Количество: ${this.color}`,a.append(i);const o=document.createElement("li");o.innerHTML=`Размер экрана: ${this.size}"`,a.append(o);const m=document.createElement("li"),l=this.hot?"да":"нет";m.innerHTML=`Популярный: ${l}`,a.append(m),e.append(a);const d=document.createElement("div");return d.className="card__favorites",d.append(this.cart),e.append(d),e}createCart(){const e=document.createElement("div");return e.className=this.isFavorit?"card__cart card__cart_favorites":"card__cart",e}favotite(){this.isFavorit=!this.isFavorit,localStorage.setItem(`card${this.name}`,JSON.stringify(this.isFavorit)),this.cart&&this.cart.classList.toggle("card__cart_favorites")}}class a{constructor(e){this.cards=[],e.forEach((e=>{const t=new s(...e);this.cards.push(t)}))}}class n{constructor(){this.amauntCart=document.createElement("span"),this.cardsContainer=this.createCardsContainer(),this.contentWrapper=this.createWrapper(),this.header=this.createHeader(),this.createMain(),document.body.prepend(this.header)}showCards(e){this.cardsContainer.innerHTML="",e.map((e=>{this.cardsContainer.append(e.element)}))}showCart(e){this.amauntCart.innerHTML=e}showFilter(e){this.contentWrapper.prepend(e)}createHeader(){const e=document.createElement("header");e.className="header";const t=document.createElement("div");t.className="wrapper";const s=document.createElement("h1");s.className="title",s.innerHTML="Online Store",t.append(s);const a=document.createElement("div");return a.className="cart",this.amauntCart.innerHTML="0",a.append(this.amauntCart),t.append(a),e.append(t),e}createWrapper(){const e=document.createElement("div");return e.className="wrapper",e}createMain(){const e=document.createElement("main");e.className="main",e.append(this.contentWrapper),document.body.prepend(e),this.contentWrapper.append(this.cardsContainer)}createCardsContainer(){const e=document.createElement("section");return e.className="cards",e}}class r{constructor(e){this.name=e;const t=localStorage.getItem(`Mfr${this.name}`);this.isActive=!!t&&JSON.parse(t),this.element=this.createEl()}createEl(){const e=document.createElement("div");return e.className=this.isActive?`mfrs__button ${this.name} mfrs__button_active`:`mfrs__button ${this.name}`,e}}class c{constructor(){this.mfrs=[],e.map((e=>{const t=new r(e);this.mfrs.push(t)})),this.eiement=this.createEl()}createEl(){const e=document.createElement("div");e.className="manufacturer";const t=document.createElement("h3");t.innerHTML="Производитель: ",e.append(t);const s=document.createElement("div");return s.className="mfrs",this.mfrs.map((e=>{s.append(e.element)})),e.append(s),e}}class i{constructor(){this.filterMfrs=new c,this.element=this.createEl()}createEl(){const e=document.createElement("div");return e.className="filtersAmount",e.append(this.filterMfrs.eiement),e}}class o{constructor(){this.filterAmount=new i,this.filterElement=this.createFilterElement(),this.mfrs=this.filterAmount.filterMfrs.mfrs}createFilterElement(){const e=document.createElement("section");return e.className="filterConteiner",e.append(this.filterAmount.element),e}}(new class{constructor(){this.cards=[];const e=localStorage.getItem("amoundCart");this.amoundCart=e?JSON.parse(e):0,this.data=new a(t),this.view=new n,this.filter=new o}start(){this.cards=[...this.data.cards],this.view.showCart(this.amoundCart.toString()),this.view.showFilter(this.filter.filterElement),this.view.showCards(this.cards),this.data.cards.map((e=>{e.element.onclick=()=>{e.favotite(),e.isFavorit?(this.amoundCart++,localStorage.amoundCart=this.amoundCart):(this.amoundCart--,localStorage.amoundCart=this.amoundCart),this.view.showCart(this.amoundCart.toString())}})),this.filter.mfrs.map((e=>{e.element.onclick=()=>{e.element.classList.toggle("mfrs__button_active"),e.isActive=!e.isActive,localStorage.setItem(`Mfr${e.name}`,JSON.stringify(e.isActive))}}))}}).start()})()})();