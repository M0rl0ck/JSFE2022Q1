(()=>{"use strict";(()=>{const t=["lenovo","hp","dell","msi"],e=["14","15","16","17"],s=[["Dell new","./assets/sss.webp",8,2022,"dell","red","16",!1],["Hp old","./assets/sss.webp",13,2018,"hp","black","15",!1],["Dell old","./assets/sss.webp",10,2019,"dell","white","14",!1],["Hp new","./assets/sss.webp",6,2021,"hp","grey","17",!1],["Lenovo mega","./assets/sss.webp",15,2020,"lenovo","red","16",!1]];class a{constructor(t,e,s,a,n,r,i,c){this.name=t,this.img=e,this.amount=s,this.year=a,this.manufacturer=n,this.color=r,this.size=i,this.hot=c;const o=localStorage.getItem(`card${this.name}`);this.isFavorit=!!o&&JSON.parse(o),this.cart=this.createCart(),this.element=this.createEl()}createEl(){const t=document.createElement("div");t.className="card";const e=document.createElement("h2");e.className="card__title",e.innerHTML=this.name,t.append(e);const s=document.createElement("div");s.className="card__img-container",s.innerHTML=` <img class="card__img" src="${this.img}" alt="${this.name}">`,t.append(s);const a=document.createElement("ul");a.className="card__props";const n=document.createElement("li");n.innerHTML=`Количество: ${this.amount}`,a.append(n);const r=document.createElement("li");r.innerHTML=`Год выхода: ${this.year}`,a.append(r);const i=document.createElement("li");i.innerHTML=`Производитель: ${this.manufacturer}`,a.append(i);const c=document.createElement("li");c.innerHTML=`Цвет: ${this.color}`,a.append(c);const o=document.createElement("li");o.innerHTML=`Размер экрана: ${this.size}"`,a.append(o);const l=document.createElement("li"),m=this.hot?"да":"нет";l.innerHTML=`Популярный: ${m}`,a.append(l),t.append(a);const h=document.createElement("div");return h.className="card__favorites",h.append(this.cart),t.append(h),t}createCart(){const t=document.createElement("div");return t.className=this.isFavorit?"card__cart card__cart_favorites":"card__cart",t}favotite(){this.isFavorit=!this.isFavorit,localStorage.setItem(`card${this.name}`,JSON.stringify(this.isFavorit)),this.cart&&this.cart.classList.toggle("card__cart_favorites")}}class n{constructor(t){this.cards=[],t.forEach((t=>{const e=new a(...t);this.cards.push(e)}))}}class r{constructor(){this.amauntCart=document.createElement("span"),this.cardsContainer=this.createCardsContainer(),this.contentWrapper=this.createWrapper(),this.header=this.createHeader(),this.createMain(),document.body.prepend(this.header),this.noData=this.createNoData()}showCards(t){this.cardsContainer.innerHTML="",0===t.length?this.cardsContainer.append(this.noData):t.map((t=>{this.cardsContainer.append(t.element)}))}showCart(t){this.amauntCart.innerHTML=t}showFilter(t){this.contentWrapper.prepend(t)}createNoData(){const t=document.createElement("div");t.className="nodata";const e=document.createElement("h2");return e.innerHTML="Извините, совпадений не обнаружено!",t.append(e),t}createHeader(){const t=document.createElement("header");t.className="header";const e=document.createElement("div");e.className="wrapper";const s=document.createElement("h1");s.className="title",s.innerHTML="Online Store",e.append(s);const a=document.createElement("div");return a.className="cart",this.amauntCart.innerHTML="0",a.append(this.amauntCart),e.append(a),t.append(e),t}createWrapper(){const t=document.createElement("div");return t.className="wrapper",t}createMain(){const t=document.createElement("main");t.className="main",t.append(this.contentWrapper),document.body.prepend(t),this.contentWrapper.append(this.cardsContainer)}createCardsContainer(){const t=document.createElement("section");return t.className="cards",t}}class i{constructor(t,e){this.name=t,this.myClass=e;const s=localStorage.getItem(`${this.myClass}${this.name}`);this.isActive=!!s&&JSON.parse(s),this.element=this.createEl()}createEl(){const t=document.createElement("div");return t.className=this.isActive?`button ${this.myClass}__button ${this.name} button_active`:`button ${this.myClass}__button ${this.name}`,t.innerHTML=this.name,t}}class c{constructor(t,e,s){this.title=e,this.myclass=s,this.buttons=[],t.map((t=>{const e=new i(t,this.myclass);this.buttons.push(e)})),this.eiement=this.createEl()}createEl(){const t=document.createElement("div");t.className="containerButtons";const e=document.createElement("h3");e.innerHTML=`${this.title}`,t.append(e);const s=document.createElement("div");return s.className="buttons",this.buttons.map((t=>{s.append(t.element)})),t.append(s),t}}class o{constructor(){this.filterMfrs=new c(t,"Производиитель: ","mfrs"),this.filterSizes=new c(e,"Размер экрана: ","sizes"),this.element=this.createEl()}createEl(){const t=document.createElement("div");return t.className="filtersAmount",t.append(this.filterMfrs.eiement),t.append(this.filterSizes.eiement),t}}class l{constructor(){this.filterAmount=new o,this.filterElement=this.createFilterElement(),this.mfrs=this.filterAmount.filterMfrs.buttons,this.sizes=this.filterAmount.filterSizes.buttons}createFilterElement(){const t=document.createElement("section");return t.className="filterConteiner",t.append(this.filterAmount.element),t}getFiters(t){const e=[];return t.map((t=>{t.isActive&&e.push(t.name)})),e}}(new class{constructor(){this.cards=[];const t=localStorage.getItem("amoundCart");this.amoundCart=t?JSON.parse(t):0,this.data=new n(s),this.view=new r,this.filter=new l}start(){this.cards=this.filterCards(),this.view.showCart(this.amoundCart.toString()),this.view.showFilter(this.filter.filterElement),this.view.showCards(this.cards),this.data.cards.map((t=>{t.element.onclick=()=>{t.favotite(),t.isFavorit?(this.amoundCart++,localStorage.amoundCart=this.amoundCart):(this.amoundCart--,localStorage.amoundCart=this.amoundCart),this.view.showCart(this.amoundCart.toString())}})),this.setEvent(this.filter.mfrs,"mfrs"),this.setEvent(this.filter.sizes,"sizes")}setEvent(t,e){t.map((t=>{t.element.onclick=()=>{t.element.classList.toggle("button_active"),t.isActive=!t.isActive,localStorage.setItem(`${e}${t.name}`,JSON.stringify(t.isActive)),this.cards=this.filterCards(),this.view.showCards(this.cards)}}))}filterCards(){const t=this.filter.getFiters(this.filter.mfrs),e=this.filter.getFiters(this.filter.sizes);let s;return s=this.filters(t,this.data.cards,"manufacturer"),s=this.filters(e,s,"size"),s}filters(t,e,s){return 0===t.length?e:e.filter((e=>t.some((t=>t==e[s]))))}}).start()})()})();