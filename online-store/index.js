(()=>{"use strict";(()=>{const t=["lenovo","hp","dell","msi"],e=[["Dell new","./assets/sss.webp",8,2022,"dell","red",16,!1],["Hp old","./assets/sss.webp",13,2018,"hp","black",15,!1],["Dell old","./assets/sss.webp",10,2019,"dell","white",14,!1],["Hp new","./assets/sss.webp",6,2021,"hp","grey",17,!1],["Lenovo mega","./assets/sss.webp",15,2020,"lenovo","red",16,!1]];class s{constructor(t,e,s,a,n,r,i,c){this.name=t,this.img=e,this.amount=s,this.year=a,this.manufacturer=n,this.color=r,this.size=i,this.hot=c;const o=localStorage.getItem(`card${this.name}`);this.isFavorit=!!o&&JSON.parse(o),this.cart=this.createCart(),this.element=this.createEl()}createEl(){const t=document.createElement("div");t.className="card";const e=document.createElement("h2");e.className="card__title",e.innerHTML=this.name,t.append(e);const s=document.createElement("div");s.className="card__img-container",s.innerHTML=` <img class="card__img" src="${this.img}" alt="${this.name}">`,t.append(s);const a=document.createElement("ul");a.className="card__props";const n=document.createElement("li");n.innerHTML=`Количество: ${this.amount}`,a.append(n);const r=document.createElement("li");r.innerHTML=`Год выхода: ${this.year}`,a.append(r);const i=document.createElement("li");i.innerHTML=`Производитель: ${this.manufacturer}`,a.append(i);const c=document.createElement("li");c.innerHTML=`Количество: ${this.color}`,a.append(c);const o=document.createElement("li");o.innerHTML=`Размер экрана: ${this.size}"`,a.append(o);const m=document.createElement("li"),l=this.hot?"да":"нет";m.innerHTML=`Популярный: ${l}`,a.append(m),t.append(a);const h=document.createElement("div");return h.className="card__favorites",h.append(this.cart),t.append(h),t}createCart(){const t=document.createElement("div");return t.className=this.isFavorit?"card__cart card__cart_favorites":"card__cart",t}favotite(){this.isFavorit=!this.isFavorit,localStorage.setItem(`card${this.name}`,JSON.stringify(this.isFavorit)),this.cart&&this.cart.classList.toggle("card__cart_favorites")}}class a{constructor(t){this.cards=[],t.forEach((t=>{const e=new s(...t);this.cards.push(e)}))}}class n{constructor(){this.amauntCart=document.createElement("span"),this.cardsContainer=this.createCardsContainer(),this.main=this.createMain(),this.header=this.createHeader()}init(){document.body.prepend(this.main),this.main.append(this.cardsContainer),document.body.prepend(this.header)}showCards(t){this.cardsContainer.innerHTML="",t.map((t=>{this.cardsContainer.append(t.element)}))}showCart(t){this.amauntCart.innerHTML=t}showFilter(t){this.main.prepend(t)}createHeader(){const t=document.createElement("header");t.className="header";const e=document.createElement("h1");e.className="title",e.innerHTML="Online Store",t.append(e);const s=document.createElement("div");return s.className="cart",this.amauntCart.innerHTML="0",s.append(this.amauntCart),t.append(s),t}createMain(){const t=document.createElement("main");return t.className="main",t}createCardsContainer(){const t=document.createElement("section");return t.className="cards",t}}class r{constructor(t){this.name=t;const e=localStorage.getItem(`Mfr${this.name}`);this.isActive=!!e&&JSON.parse(e),this.element=this.createEl()}createEl(){const t=document.createElement("div");return t.className=this.isActive?`mfrs__button ${this.name} mfrs__button_active`:`mfrs__button ${this.name}`,t}}class i{constructor(){this.mfrs=[],t.map((t=>{const e=new r(t);this.mfrs.push(e)})),this.eiement=this.createEl()}createEl(){const t=document.createElement("div");t.className="manufacturer";const e=document.createElement("h3");e.innerHTML="Производитель: ",t.append(e);const s=document.createElement("div");return s.className="mfrs",this.mfrs.map((t=>{s.append(t.element)})),t.append(s),t}}class c{constructor(){this.filterMfrs=new i,this.element=this.createEl()}createEl(){const t=document.createElement("div");return t.className="filtersAmount",t.append(this.filterMfrs.eiement),t}}class o{constructor(){this.filterAmount=new c,this.filterElement=this.createFilterElement(),this.mfrs=this.filterAmount.filterMfrs.mfrs}createFilterElement(){const t=document.createElement("section");return t.className="filterConteiner",t.append(this.filterAmount.element),t}}(new class{constructor(){this.cards=[];const t=localStorage.getItem("amoundCart");this.amoundCart=t?JSON.parse(t):0,this.data=new a(e),this.view=new n,this.filter=new o}start(){this.cards=[...this.data.cards],this.view.init(),this.view.showCart(this.amoundCart.toString()),this.view.showFilter(this.filter.filterElement),this.view.showCards(this.cards),this.data.cards.map((t=>{t.element.onclick=()=>{t.favotite(),t.isFavorit?(this.amoundCart++,localStorage.amoundCart=this.amoundCart):(this.amoundCart--,localStorage.amoundCart=this.amoundCart),this.view.showCart(this.amoundCart.toString())}})),this.filter.mfrs.map((t=>{t.element.onclick=()=>{t.element.classList.toggle("mfrs__button_active"),t.isActive=!t.isActive,localStorage.setItem(`Mfr${t.name}`,JSON.stringify(t.isActive))}}))}}).start()})()})();